\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{stmaryrd}

\author{Pierre Gimalac \& Alexandre Moine\\\small{Encadré par François Laroussinie}}
\title{Rapport de Projet\\Mathématiques-Informatique}
\begin{document}
\maketitle

\section{CTL, une logique temporelle}
\subsection{Définition}
CTL (pour \textit{Computation Tree Logic}) est une logique temporelle ; CTL contient la logique propositionnelle usuelle et ajoute des opérateurs temporels

Elle permet par exemple d'exprimer des propriétés comme ``il existe une exécution telle que la variable \textit{a} soit toujours vraie''.

\subsection{Grammaire}
La grammaire de CTL est définie de la manière suivante :
\begin{align*}
\phi &::= \bot \mid \top \mid p \mid \neg \phi \mid \phi\land\phi \mid \phi\lor\phi \mid \\
&\quad \mbox{AX }\phi \mid \mbox{EX }\phi \mid
\mbox{A }\phi \mbox{ W } \phi \mid \mbox{E }\phi \mbox{ W } \phi \mid
\mbox{A }\phi \mbox{ U } \phi \mid \mbox{E }\phi \mbox{ U } \phi
\end{align*}

Ici, $p$ représente une proposition atomique d'un ensemble $\Omega$.

On définit aussi d'autres opérateurs utiles :
\begin{itemize}
	\item $\mbox{AF } \phi := \mbox{A } \top \mbox{ U } \phi$
	\item $\mbox{EG } \phi := \neg (\mbox{AF } (\neg \phi))$
	\item $\mbox{EF } \phi := \mbox{E } \top \mbox{ U } \phi$
	\item $\mbox{AG } \phi := \neg (\mbox{EF } (\neg \phi))$
\end{itemize}

\subsection{Sémantique de CTL}
Les modèles de CTL sont appelés des \emph{structures de Kripke}.

\subsubsection{Structures de Kripke}
Une structure de Kripke sera ici identifiée à la donnée de $(Q,T,q_0,l)$ où:
\begin{itemize}
\item Le couple $(Q,T, q_0)$ est un automate : $Q$ est un ensemble d'états, $T \subseteq Q \times Q$ est l'ensemble des transitions et $q_0 \in Q$ représente l'état de départ.
\item $l : Q \to \Omega$ est une fonction d'étiquetage.
\end{itemize}

\subsubsection{Exécution}
Soit $\mathcal{A} = (Q,T,q_0,l)$ une structure de Kripke.
On dira que $\sigma : \mathbb{N} \to Q$ est une \emph{exécution} de $\cal{A}$ (ne partant pas forcément de l'état initial) si et seulement si $\forall i \in \mathbb{N}, (\sigma (i), \sigma (i+1)) \in T$.

\subsubsection{Satisfaction}
Soit $\mathcal{A} = (Q,T,q_0,l)$ une structure de Kripke, $\phi$ une formule de CTL et $\sigma$ une exécution de $\mathcal{A}$.\\
Pour tout $i \in \mathbb{N}$, on dira que "$\phi$ est vraie au temps $i$ de l'exécution de $\sigma$" si et seulement si $A,\sigma,i \vDash \phi$. On omettra souvent la donnée de $\mathcal{A}$ dans notre écriture.\\
On définit $\sigma,i \vDash \phi$ par induction sur $\phi$:\\
\\
\begin{tabular}{lcl}
	% TODO bot and top
$\sigma,i \vDash p$ &ssi& $p \in l (\sigma(i))$\\
$\sigma,i \vDash \neg \psi$ &ssi& $\sigma,i \nvDash \psi$\\
$\sigma,i \vDash \psi_1 \land \psi_2$ &ssi& $\sigma,i \vDash \psi_1$ et $\sigma,i \vDash \psi_2$\\
$\sigma,i \vDash \psi_1 \lor \psi_2$ &ssi& $\sigma,i \vDash \psi_1$ ou $\sigma,i \vDash \psi_2$\\
$\sigma,i \vDash \mbox{EX } \psi$ &ssi& $\exists \sigma'$, $\forall j \leq i$: $\sigma(j) = \sigma'(j)$ et $\sigma',i+1 \vDash \psi$\\
$\sigma,i \vDash \mbox{AX } \psi$ &ssi& $\forall \sigma'$, $\forall j \leq i$: $\sigma(j) = \sigma'(j)$ et $\sigma',i+1 \vDash \psi$\\

$\sigma,i \vDash \mbox{E } \psi_1 \mbox{ U } \psi_2$ &ssi& $\exists \sigma'$, $\forall j \leq i$: $\sigma(j) = \sigma'(j)$ et\\
& & $\exists k \geq i$: $\sigma',k\vDash \psi_2$ et $\forall n \in \llbracket i; k \llbracket$, $\sigma',n \vDash \psi_1$\\

$\sigma,i \vDash \mbox{A } \psi_1 \mbox{ U } \psi_2$ &ssi& $\forall \sigma'$, $\forall j \leq i$: $\sigma(j) = \sigma'(j)$ et\\
& & $\exists k \geq i$: $\sigma',k\vDash \psi_2$ et $\forall n \llbracket i; k \llbracket$: $\sigma',n \vDash \psi_1$\\

$\sigma,i \vDash \mbox{E } \psi_1 \mbox{ W } \psi_2$ &ssi& $\exists \sigma'$ tel que $\forall j \leq i$: $\sigma(j) = \sigma'(j)$,\\
& & soit $\exists k \geq i$: $\sigma',k\vDash \psi_2$ et $\forall n \in \llbracket i; k \llbracket$: $\sigma',n \vDash \psi_1$\\
& & soit $\forall n \geq i$: $\sigma',n \vDash \psi_1$\\

$\sigma,i \vDash \mbox{A } \psi_1 \mbox{ W } \psi_2$ &ssi& $\forall \sigma'$ tel que $\forall j \leq i$: $\sigma(j) = \sigma'(j)$, \\
& & soit $\exists k \geq i$: $\sigma',k\vDash \psi_2$ et $\forall n \in \llbracket i; k \llbracket$: $\sigma',n \vDash \psi_1$\\
& & soit $\forall n \geq i$: $\sigma',n \vDash \psi_1$\\
\end{tabular}


\subsection{Négation}
On peut définir la fonction $neg:CTL \to CTL$ qui permet de transformer une formule de CTL de la forme $\neg \phi$ en formule équivalente où toutes les négations sont sur les littéraux :
\begin{align*}
&neg(\top) = \bot \quad neg(\bot) = \top\\
&neg(p) = \neg p \quad neg(\neg \phi) = \phi\\
&neg(a \lor b) = neg(a) \land neg(b)\\
&neg(a \land b) = neg(a) \lor neg(b)\\
&neg(\mbox{AX } \phi) = \mbox{EX }neg(\phi)\\
&neg(\mbox{EX } \phi) = \mbox{AX }neg(\phi)\\
&neg(\mbox{E } \phi \mbox{ U } \psi) =\mbox{A } (neg(\psi)) \mbox{ W } (neg(\phi) \land neg(\psi))\\
&neg(\mbox{A } \phi \mbox{ U } \psi) =\mbox{E } (neg(\psi)) \mbox{ W } (neg(\phi) \land neg(\psi))\\
&neg(\mbox{E } \phi \mbox{ W } \psi) =\mbox{A } (neg(\psi)) \mbox{ U } (neg(\phi) \land neg(\psi))\\
&neg(\mbox{A } \phi \mbox{ W } \psi) =\mbox{E } (neg(\psi)) \mbox{ U } (neg(\phi) \land neg(\psi))
\end{align*}

\section{Model-checking de CTL: parcours de graphe}

\section{Model-checking de CTL: jeux faibles de parité}
Le but ici est de parvenir à créer un jeu à partir d'une formule et d'une structure de Kripke où deux joueurs (nommés Eve et Adam) s'affrontent, et Eve gagne si et seulement si la formule est vraie dans la structure donnée.

\subsection{Jeux de parité}
On appelle \emph{jeu de parité} un quadruplet $G = (V_E, V_A, R, c)$ où:
\begin{itemize}
\item $V_E$ (respectivement $V_A$) est l'ensemble des états jouables par Eve (respectivement Adam). On demande de plus que $V_e \cap V_a = \emptyset$. On note $V = V_e \sqcup V_a$.
\item $R \subseteq V \times V$ est une relation de transition.
\item $c : V \to (\mathbb{N} \cup \{\bot\})$ est une fonction qui associe une couleur ou $\bot$ à chaque état.
\end{itemize}

Une partie est une séquence d'états $\gamma_i$ telle que $\forall i \in I \subseteq \mathbb{N}, (\gamma_i,\gamma_{i+1}) \in R$. Si $I$ est fini, on demande alors que $\gamma_{max(I)}$ n'ait pas de successeurs par $R$.

\subsection{Jeux faibles de parité}
On dit qu'un jeu de parité $G = (V_E,V_A,R,c)$ est \emph{faible}  si et seulement si il existe $V_1$, ..., $V_k$ une partition de $V = V_E \sqcup V_A$ telle que:
\begin{itemize}
\item La couleur soit la même pour tous les états d'une classe de la partition : $\forall i \in \llbracket 1 ; k \rrbracket$, $\forall x, y \in V_i$, $c(x) = c(y)$
\item La partition représente une convergence du jeu :\\
$\forall (x, y) \in R$, $x\in V_i, y \in V_j \Rightarrow i \leq j$.
\end{itemize}

\subsection{Formule booléennes positives}
On définit l'ensemble des formules booléennes positives sur un ensemble $\Omega$ (noté $PBF(\Omega) $) de la manière suivante :
$\phi := \bot \mid \top \mid p \mid \psi_1 \lor \psi_2 \mid  \psi_1 \land \psi_2$

\subsection{Algorithme de construction du jeu}
Nous allons maintenant définir un algorithme qui permet de construire un jeu de parité à partir d'une formule de CTL et d'une structure de Kripke. Nous allons ensuite montrer que ce jeu est \emph{faible} et que Eve gagne si et seulement si la formule est vraie dans la structure. Plus précisément, nous allons donner ici la fonction de transition du jeu.

Soit $\phi$ une formule de CTL et $K = (Q,T,q_0,l)$  une structure de Kripke.
On va construire un jeu de parité $G = (V_E,V_A,R,c)$ où:
\begin{itemize}
	\item $V = PBF(Q \times CTL) $ %todo vérif

\end{itemize}

\end{document}
